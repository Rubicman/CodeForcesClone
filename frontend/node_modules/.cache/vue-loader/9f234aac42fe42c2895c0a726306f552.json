{"remainingRequest":"D:\\Study\\Programms\\web\\lesson10\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Study\\Programms\\web\\lesson10\\frontend\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Study\\Programms\\web\\lesson10\\frontend\\src\\App.vue","mtime":1576643175154},{"path":"D:\\Study\\Programms\\web\\lesson10\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Study\\Programms\\web\\lesson10\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Study\\Programms\\web\\lesson10\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Study\\Programms\\web\\lesson10\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAnLi9jb21wb25lbnRzL0hlYWRlcicKaW1wb3J0IE1pZGRsZSBmcm9tICcuL2NvbXBvbmVudHMvTWlkZGxlJwppbXBvcnQgRm9vdGVyIGZyb20gJy4vY29tcG9uZW50cy9Gb290ZXInCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdhcHAnLAogICAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHVzZXI6IG51bGwsCiAgICAgICAgICAgIHBvc3RzOiBbXSwKICAgICAgICAgICAgdXNlcnM6IFtdCiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBIZWFkZXIsCiAgICAgICAgTWlkZGxlLAogICAgICAgIEZvb3RlcgogICAgfSwgYmVmb3JlQ3JlYXRlKCkgewogICAgICAgIGF4aW9zLmdldCgiL2FwaS8xL3Bvc3RzIikudGhlbihwb3N0cyA9PiB0aGlzLnBvc3RzID0gcG9zdHNbImRhdGEiXSk7CiAgICAgICAgYXhpb3MuZ2V0KCIvYXBpLzEvdXNlcnMiKS50aGVuKHVzZXJzID0+IHRoaXMudXNlcnMgPSB1c2Vyc1siZGF0YSJdKTsKCiAgICAgICAgdGhpcy4kcm9vdC4kb24oIm9uTG9nb3V0IiwgKCkgPT4gewogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiand0Iik7CiAgICAgICAgICAgIHRoaXMudXNlciA9IG51bGw7CiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuJHJvb3QuJG9uKCJvbkp3dCIsIChqd3QsIGVudGVyKSA9PiB7CiAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBqd3QKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGF4aW9zLmdldCgiL2FwaS8xL3VzZXJzL2F1dGhvcml6ZWQiKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudXNlciA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAoZW50ZXIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkVudGVyU3VjY2VzcyIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy4kcm9vdC4kb24oIm9uUG9zdCIsICh1cmwsIGRhdGEgPSB7fSwgc3VjY2VzcyA9ICgpID0+IHsKICAgICAgICB9KSA9PiB7CiAgICAgICAgICAgIGF4aW9zLnBvc3QodXJsLCBkYXRhKS50aGVuKHN1Y2Nlc3MpLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uRXJyb3IiLCBlcnJvci5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfSkKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy4kcm9vdC4kb24oIm9uUG9zdENyZWF0aW9uU3VjY2VzcyIsICgpID0+IHsKICAgICAgICAgICAgYXhpb3MuZ2V0KCIvYXBpLzEvcG9zdHMiKS50aGVuKHBvc3RzID0+IHRoaXMucG9zdHMgPSBwb3N0c1siZGF0YSJdKTsKICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25DaGFuZ2VQYWdlIiwgIkluZGV4IikKICAgICAgICB9KQoKICAgIH0sIGJlZm9yZU1vdW50KCkgewogICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0IikgJiYgIXRoaXMudXNlcikgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkp3dCIsIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3QiKSwgdHJ1ZSk7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n    <!--suppress HtmlUnknownTag -->\n    <body id=\"app\">\n    <Header :user=\"user\"/>\n    <Middle :posts=\"posts\" :users=\"users\"/>\n    <Footer/>\n    </body>\n</template>\n\n<script>\n    import Header from './components/Header'\n    import Middle from './components/Middle'\n    import Footer from './components/Footer'\n    import axios from 'axios'\n\n    export default {\n        name: 'app',\n        data: function () {\n            return {\n                user: null,\n                posts: [],\n                users: []\n            }\n        },\n        components: {\n            Header,\n            Middle,\n            Footer\n        }, beforeCreate() {\n            axios.get(\"/api/1/posts\").then(posts => this.posts = posts[\"data\"]);\n            axios.get(\"/api/1/users\").then(users => this.users = users[\"data\"]);\n\n            this.$root.$on(\"onLogout\", () => {\n                localStorage.removeItem(\"jwt\");\n                this.user = null;\n            });\n\n            this.$root.$on(\"onJwt\", (jwt, enter) => {\n                axios.defaults.headers = {\n                    Authorization: \"Bearer \" + jwt\n                };\n\n                axios.get(\"/api/1/users/authorized\").then(response => {\n                    this.user = response.data;\n                    if (enter) {\n                        this.$root.$emit(\"onEnterSuccess\");\n                    }\n                });\n            });\n\n            this.$root.$on(\"onPost\", (url, data = {}, success = () => {\n            }) => {\n                axios.post(url, data).then(success).catch(error => {\n                    this.$root.$emit(\"onError\", error.response.data);\n                })\n            });\n\n            this.$root.$on(\"onPostCreationSuccess\", () => {\n                axios.get(\"/api/1/posts\").then(posts => this.posts = posts[\"data\"]);\n                this.$root.$emit(\"onChangePage\", \"Index\")\n            })\n\n        }, beforeMount() {\n            if (localStorage.getItem(\"jwt\") && !this.user) {\n                this.$root.$emit(\"onJwt\", localStorage.getItem(\"jwt\"), true);\n            }\n        }\n    }\n</script>\n\n<style>\n</style>\n"]}]}